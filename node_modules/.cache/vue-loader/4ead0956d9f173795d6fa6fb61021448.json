{"remainingRequest":"/Users/natanielmarmucki/rentalbike/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/natanielmarmucki/rentalbike/app/src/views/Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/natanielmarmucki/rentalbike/app/src/views/Dashboard.vue","mtime":1592223375901},{"path":"/Users/natanielmarmucki/rentalbike/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/natanielmarmucki/rentalbike/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/natanielmarmucki/rentalbike/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/natanielmarmucki/rentalbike/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDaGFydCBmcm9tICdjaGFydC5qcycKaW1wb3J0IFNpZGViYXIgZnJvbSAnLi4vY29tcG9uZW50cy9TaWRlYmFyJwp2YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50JykKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdEYXNoYm9hcmQnLAogIGNvbXBvbmVudHM6IHsKICAgIFNpZGViYXIKICB9LAogIGNvbXB1dGVkOiB7CiAgICByZW50YWxzICgpIHsKICAgICAgY29uc3QgdGhhdCA9IHRoaXMKICAgICAgZnVuY3Rpb24gY29tcGFyZSAoYSwgYikgewogICAgICAgIGlmIChhLmlkIDwgYi5pZCkgewogICAgICAgICAgcmV0dXJuIDEKICAgICAgICB9CiAgICAgICAgaWYgKGEuaWQgPiBiLmlkKSB7CiAgICAgICAgICByZXR1cm4gLTEKICAgICAgICB9CiAgICAgICAgcmV0dXJuIDAKICAgICAgfQogICAgICByZXR1cm4gdGhhdC4kc3RvcmUuZ2V0dGVycy5hbGxSZW50YWxzLnNvcnQoY29tcGFyZSkKICAgIH0sCiAgICB1c2VyICgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMudXNlcgogICAgfSwKICAgIG1vdW50ZWQgKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldFJlbnRhbHMnKQogICAgfSwKICAgIG51bWJlck9mQmlrZXNSZW50ZWQgKCkgewogICAgICBjb25zdCB0aGF0ID0gdGhpcwogICAgICBjb25zdCBkYXRlID0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREJykKICAgICAgbGV0IGRhdGUyID0gbW9tZW50KCkuc3VidHJhY3QoMSwgJ21vbnRocycpCiAgICAgIGRhdGUyID0gZGF0ZTIuZm9ybWF0KCdZWVlZLU1NLUREJykKICAgICAgcmV0dXJuIHRoYXQuJHN0b3JlLmdldHRlcnMuYWxsUmVudGFscy5maWx0ZXIoaXRlbSA9PiBpdGVtLnBpY2t1cCA8PSBkYXRlICYgaXRlbS5waWNrdXAgPj0gZGF0ZTIpLmxlbmd0aAogICAgfSwKICAgIG51bWJlck9mQm9va2VkQmlrZVJlbnRhbHMgKCkgewogICAgICBjb25zdCB0aGF0ID0gdGhpcwogICAgICBjb25zdCBkYXRlID0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREJykKICAgICAgcmV0dXJuIHRoYXQuJHN0b3JlLmdldHRlcnMuYWxsUmVudGFscy5maWx0ZXIoaXRlbSA9PiBpdGVtLnBpY2t1cCA+IGRhdGUpLmxlbmd0aAogICAgfQogIH0sCiAgZGF0YSAoKSB7CiAgICBjb25zdCB0aGF0ID0gdGhpcwogICAgY29uc3QgZGF0ZSA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpCiAgICBjb25zdCBvbmUgPSB0aGF0LiRzdG9yZS5nZXR0ZXJzLmFsbFJlbnRhbHMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5waWNrdXAgPT09IGRhdGUpLmxlbmd0aAoKICAgIGxldCBkYXRlMiA9IG1vbWVudCgpLnN1YnRyYWN0KDEsICdkYXlzJykKICAgIGRhdGUyID0gZGF0ZTIuZm9ybWF0KCdZWVlZLU1NLUREJykKICAgIGNvbnN0IHR3byA9IHRoYXQuJHN0b3JlLmdldHRlcnMuYWxsUmVudGFscy5maWx0ZXIoaXRlbSA9PiBpdGVtLnBpY2t1cCA9PT0gZGF0ZTIpLmxlbmd0aAoKICAgIGxldCBkYXRlMyA9IG1vbWVudCgpLnN1YnRyYWN0KDIsICdkYXlzJykKICAgIGRhdGUzID0gZGF0ZTMuZm9ybWF0KCdZWVlZLU1NLUREJykKICAgIGNvbnN0IHRocmVlID0gdGhhdC4kc3RvcmUuZ2V0dGVycy5hbGxSZW50YWxzLmZpbHRlcihpdGVtID0+IGl0ZW0ucGlja3VwID09PSBkYXRlMykubGVuZ3RoCgogICAgbGV0IGRhdGU0ID0gbW9tZW50KCkuc3VidHJhY3QoMywgJ2RheXMnKQogICAgZGF0ZTQgPSBkYXRlNC5mb3JtYXQoJ1lZWVktTU0tREQnKQogICAgY29uc3QgZm91ciA9IHRoYXQuJHN0b3JlLmdldHRlcnMuYWxsUmVudGFscy5maWx0ZXIoaXRlbSA9PiBpdGVtLnBpY2t1cCA9PT0gZGF0ZTQpLmxlbmd0aAoKICAgIGxldCBkYXRlNSA9IG1vbWVudCgpLnN1YnRyYWN0KDQsICdkYXlzJykKICAgIGRhdGU1ID0gZGF0ZTUuZm9ybWF0KCdZWVlZLU1NLUREJykKICAgIGNvbnN0IGZpdmUgPSB0aGF0LiRzdG9yZS5nZXR0ZXJzLmFsbFJlbnRhbHMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5waWNrdXAgPT09IGRhdGU1KS5sZW5ndGgKCiAgICBsZXQgZGF0ZTYgPSBtb21lbnQoKS5zdWJ0cmFjdCg1LCAnZGF5cycpCiAgICBkYXRlNiA9IGRhdGU2LmZvcm1hdCgnWVlZWS1NTS1ERCcpCiAgICBjb25zdCBzaXggPSB0aGF0LiRzdG9yZS5nZXR0ZXJzLmFsbFJlbnRhbHMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5waWNrdXAgPT09IGRhdGU2KS5sZW5ndGgKCiAgICBsZXQgZGF0ZTcgPSBtb21lbnQoKS5zdWJ0cmFjdCg2LCAnZGF5cycpCiAgICBkYXRlNyA9IGRhdGU3LmZvcm1hdCgnWVlZWS1NTS1ERCcpCiAgICBjb25zdCBzZXZlbiA9IHRoYXQuJHN0b3JlLmdldHRlcnMuYWxsUmVudGFscy5maWx0ZXIoaXRlbSA9PiBpdGVtLnBpY2t1cCA9PT0gZGF0ZTcpLmxlbmd0aAoKICAgIHJldHVybiB7CiAgICAgIHJlbnRhbHNEYXRhOiB7CiAgICAgICAgdHlwZTogJ2JhcicsCiAgICAgICAgZGF0YTogewogICAgICAgICAgbGFiZWxzOiBbZGF0ZTcsIGRhdGU2LCBkYXRlNSwgZGF0ZTQsIGRhdGUzLCBkYXRlMiwgZGF0ZV0sCiAgICAgICAgICBkYXRhc2V0czogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSg5OSwxNzksMjM3LDAuNCknLAogICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiAnIzYzYjNlZCcsCiAgICAgICAgICAgICAgcG9pbnRDb2xvcjogJyNmZmYnLAogICAgICAgICAgICAgIHBvaW50U3Ryb2tlQ29sb3I6ICcjNjNiM2VkJywKICAgICAgICAgICAgICBkYXRhOiBbc2V2ZW4sIHNpeCwgZml2ZSwgZm91ciwgdGhyZWUsIHR3bywgb25lXQogICAgICAgICAgICB9CiAgICAgICAgICBdCiAgICAgICAgfSwKICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgICAgZGlzcGxheTogZmFsc2UKICAgICAgICAgIH0sCiAgICAgICAgICBzY2FsZXM6IHsKICAgICAgICAgICAgeUF4ZXM6IFsKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBncmlkTGluZXM6IHsKICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmFsc2UKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0aWNrczogewogICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmYWxzZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKICAgICAgICAgICAgeEF4ZXM6IFsKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBncmlkTGluZXM6IHsKICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmFsc2UKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQgKCkgewogICAgKCgpID0+CiAgICAgIG5ldyBDaGFydChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVudGFscy1jaGFydCcpLCB0aGlzLnJlbnRhbHNEYXRhKSkoKQogICAgcmV0dXJuIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRSZW50YWxzJykKICB9Cn0K"},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"dashboard\">\n    <div class=\"w-full\">\n      <div class=\"flex bg-white\">\n        <div\n          class=\"w-2/3 lg:w-full bg-gray-100 pl-0 lg:pl-64 lg:w-full min-h-screen\"\n          id=\"main-content\"\n        >\n        <Sidebar />\n          <div class=\"p-6 bg-gray-100 mb-20\">\n            <div>\n              <div class=\"flex flex-wrap -mx-3\">\n                <div class=\"w-2/3 xl:w-2/3 px-3\">\n                  <p class=\"text-2xl font-semibold mb-4\">Cześć, {{user.name}}!</p>\n                </div>\n                <div class=\"w-full xl:w-2/3 px-3\">\n                  <p class=\"text-xl font-semibold mb-4\">Wypożyczenia w ostatnich 7 dniach</p>\n\n                  <div class=\"w-full bg-white border rounded-lg p-4 mb-8 xl:mb-0\">\n                    <canvas id=\"rentals-chart\" width=\"600\" height=\"400\"></canvas>\n                  </div>\n                  <div class=\"flex flex-no-wrap\">\n                    <div\n                      class=\" mt-6 mr-3 w-1/2 bg-white border text-blue-400 rounded-lg flex items-center p-6 mb-6 xl:mb-0\"\n                    >\n                      <svg class=\"w-16 h-16 fill-current mr-4 hidden lg:block\" viewBox=\"0 0 20 20\">\n                        <path\n                          d=\"M17.35,2.219h-5.934c-0.115,0-0.225,0.045-0.307,0.128l-8.762,8.762c-0.171,0.168-0.171,0.443,0,0.611l5.933,5.934c0.167,0.171,0.443,0.169,0.612,0l8.762-8.763c0.083-0.083,0.128-0.192,0.128-0.307V2.651C17.781,2.414,17.587,2.219,17.35,2.219M16.916,8.405l-8.332,8.332l-5.321-5.321l8.333-8.332h5.32V8.405z M13.891,4.367c-0.957,0-1.729,0.772-1.729,1.729c0,0.957,0.771,1.729,1.729,1.729s1.729-0.772,1.729-1.729C15.619,5.14,14.848,4.367,13.891,4.367 M14.502,6.708c-0.326,0.326-0.896,0.326-1.223,0c-0.338-0.342-0.338-0.882,0-1.224c0.342-0.337,0.881-0.337,1.223,0C14.84,5.826,14.84,6.366,14.502,6.708\"\n                        />\n                      </svg>\n\n                      <div class=\"text-gray-700\">\n                        <p class=\"font-semibold text-3xl\">{{numberOfBikesRented}}</p>\n                        <p>Rowerów wypożyczonych</p>\n                      </div>\n                    </div>\n                    <div\n                      class=\"mt-6 ml-3 w-1/2 bg-white border text-blue-400 rounded-lg flex items-center p-6 mb-6 xl:mb-0\"\n                    >\n                      <svg class=\"w-16 h-16 fill-current mr-4 hidden lg:block\" viewBox=\"0 0 20 20\">\n                        <path\n                          d=\"M17.684,7.925l-5.131-0.67L10.329,2.57c-0.131-0.275-0.527-0.275-0.658,0L7.447,7.255l-5.131,0.67C2.014,7.964,1.892,8.333,2.113,8.54l3.76,3.568L4.924,17.21c-0.056,0.297,0.261,0.525,0.533,0.379L10,15.109l4.543,2.479c0.273,0.153,0.587-0.089,0.533-0.379l-0.949-5.103l3.76-3.568C18.108,8.333,17.986,7.964,17.684,7.925 M13.481,11.723c-0.089,0.083-0.129,0.205-0.105,0.324l0.848,4.547l-4.047-2.208c-0.055-0.03-0.116-0.045-0.176-0.045s-0.122,0.015-0.176,0.045l-4.047,2.208l0.847-4.547c0.023-0.119-0.016-0.241-0.105-0.324L3.162,8.54L7.74,7.941c0.124-0.016,0.229-0.093,0.282-0.203L10,3.568l1.978,4.17c0.053,0.11,0.158,0.187,0.282,0.203l4.578,0.598L13.481,11.723z\"\n                        />\n                      </svg>\n\n                      <div class=\"text-gray-700\">\n                        <p class=\"font-semibold text-3xl\">{{numberOfBookedBikeRentals}}</p>\n                        <p>Zarezerwowanych wypożyczeń</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"w-full xl:w-1/3 px-3\">\n                  <p class=\"text-xl font-semibold mb-4\">Najnowsze wypożyczenia</p>\n                  <div class=\"w-full bg-white border rounded-lg p-4\">\n                    <div\n                      class=\"w-full bg-gray-100 border rounded-lg flex justify-between items-center px-4 py-2 mb-4\"\n                      v-for=\"(rental, index) in rentals.slice(0,10)\"\n                      :key=\"index\"\n                    >\n                      <div>\n                        <p\n                          class=\"font-semibold text-xl\"\n                        >{{rental.user.name}} {{rental.user.surname}}</p>\n                        <p>{{rental.bikes.name}}</p>\n                      </div>\n                      <span class=\"text-green-500 font-semibold text-lg\">{{rental.price}} PLN</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Chart from 'chart.js'\nimport Sidebar from '../components/Sidebar'\nvar moment = require('moment')\nexport default {\n  name: 'Dashboard',\n  components: {\n    Sidebar\n  },\n  computed: {\n    rentals () {\n      const that = this\n      function compare (a, b) {\n        if (a.id < b.id) {\n          return 1\n        }\n        if (a.id > b.id) {\n          return -1\n        }\n        return 0\n      }\n      return that.$store.getters.allRentals.sort(compare)\n    },\n    user () {\n      return this.$store.getters.user\n    },\n    mounted () {\n      return this.$store.dispatch('getRentals')\n    },\n    numberOfBikesRented () {\n      const that = this\n      const date = moment().format('YYYY-MM-DD')\n      let date2 = moment().subtract(1, 'months')\n      date2 = date2.format('YYYY-MM-DD')\n      return that.$store.getters.allRentals.filter(item => item.pickup <= date & item.pickup >= date2).length\n    },\n    numberOfBookedBikeRentals () {\n      const that = this\n      const date = moment().format('YYYY-MM-DD')\n      return that.$store.getters.allRentals.filter(item => item.pickup > date).length\n    }\n  },\n  data () {\n    const that = this\n    const date = moment().format('YYYY-MM-DD')\n    const one = that.$store.getters.allRentals.filter(item => item.pickup === date).length\n\n    let date2 = moment().subtract(1, 'days')\n    date2 = date2.format('YYYY-MM-DD')\n    const two = that.$store.getters.allRentals.filter(item => item.pickup === date2).length\n\n    let date3 = moment().subtract(2, 'days')\n    date3 = date3.format('YYYY-MM-DD')\n    const three = that.$store.getters.allRentals.filter(item => item.pickup === date3).length\n\n    let date4 = moment().subtract(3, 'days')\n    date4 = date4.format('YYYY-MM-DD')\n    const four = that.$store.getters.allRentals.filter(item => item.pickup === date4).length\n\n    let date5 = moment().subtract(4, 'days')\n    date5 = date5.format('YYYY-MM-DD')\n    const five = that.$store.getters.allRentals.filter(item => item.pickup === date5).length\n\n    let date6 = moment().subtract(5, 'days')\n    date6 = date6.format('YYYY-MM-DD')\n    const six = that.$store.getters.allRentals.filter(item => item.pickup === date6).length\n\n    let date7 = moment().subtract(6, 'days')\n    date7 = date7.format('YYYY-MM-DD')\n    const seven = that.$store.getters.allRentals.filter(item => item.pickup === date7).length\n\n    return {\n      rentalsData: {\n        type: 'bar',\n        data: {\n          labels: [date7, date6, date5, date4, date3, date2, date],\n          datasets: [\n            {\n              backgroundColor: 'rgba(99,179,237,0.4)',\n              strokeColor: '#63b3ed',\n              pointColor: '#fff',\n              pointStrokeColor: '#63b3ed',\n              data: [seven, six, five, four, three, two, one]\n            }\n          ]\n        },\n        options: {\n          legend: {\n            display: false\n          },\n          scales: {\n            yAxes: [\n              {\n                gridLines: {\n                  display: false\n                },\n                ticks: {\n                  display: false\n                }\n              }\n            ],\n            xAxes: [\n              {\n                gridLines: {\n                  display: false\n                }\n              }\n            ]\n          }\n        }\n      }\n    }\n  },\n  mounted () {\n    (() =>\n      new Chart(document.getElementById('rentals-chart'), this.rentalsData))()\n    return this.$store.dispatch('getRentals')\n  }\n}\n</script>\n"]}]}